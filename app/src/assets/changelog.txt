Changelog for Open World Paper Mario Randomizer


# DISCLAIMER
# SOME OR ALL OF THE INFORMATION PROVIDED BELOW IS SUBJECT TO CHANGE!
# THIS IS AN ALPHA TEST.
# DOES NOT CONTAIN ALL FEATURES PLANNED OR CURRENTLY IN DEVELOPMENT.
# SOME FEATURES MENTIONED MAY NOT WORK PROPERLY OR AT ALL.
# ADDITIONALLY, CRASHES AND OTHER BUGS MAY OCCUR. PLEASE REPORT THEM!
# WE ARE LOOKING FOR FEEDBACK FOR ANY AND ALL PARTS OF THE MOD!

# ALPHA 3

## Known Issues
    * The logic does not account for shuffled chapter difficulty and may expect
      Mario to progress by visiting places where the enemies are far too strong.
    * Under certain unknown conditions the piranha miniboss fight near Raphael's
      Tree may retrigger.

## General Changes
    * Gameplay
        * Added Homeward Shroom key item and made Mario start the game with it.
          Use it within the key item menu to warp back to the starting map. It is disabled during the volcano escape and Tubba Blubba Castle escape.
        * The quiz at Bowser's Castle's second Bowser Door is now harder and randomized.
          Additionally, it only requires 3 out of 5 correct answers.
        * Progressive Scaling should now ramp up the difficulty more slowly and the enemy stats have been toned down overall.
        * The calculator thief Shy Guy now holds both items he can drop at once.
          This makes it so Mario is no longer required to leave and re-enter the
          Toy Box to get the Shy Guys's second item.
        * The star pieces cost to buy Merlow's items have been changed to the following: Prices range from 2SP to 6SP, with 3 items for each price.
        * When a NPC hands out a consumable item and the player's inventory is full, the player is now able
          to discard a chosen item. Previously the NPC item would just disapear.
        * Simon the poet in Toad Town will now give you his item on first interaction, without needing to exit and reenter the map.
        * The speed at which Mario pushes blocks has been slightly increased.
        * AlwaysISpy option is now silent, the star piece indicator will be visually present when entering a room with a hidden pannel, but makes no sound.
        * It is now possible to re-enter Tubba Bubba's castle after the escape and before beating the chapter boss. This prevents players from being softlocked if an item leading to the super boots was in the castle and not collected.
    * Title Screen
        * Added a new title logo for the randomizer.
    * Random Formations
        * As Medi Guys scale the same as other chapter 4 enemies, they no
          longer appear outside of the Toy Box during Random Formations if
          ProgressiveScaling is turned off.
    * Logic
      * Logic now expects the player to have the Bowser's Castle required partners before starting it
      * The bombable wall during the volcano escape is now always open to prevent softlocks if the player doesn't have Bombette
      * Star pieces are now considered in logic so it should be impossible to be locked because of spending star pieces on non-progression items


## New Options
    * Option: ShortenBowsersCastle
      If this is turned on, then the loading zones in Bowser's Castle are re-
      routed to noticably shorten Mario's stay there.
        * The second Bowser door takes the place of the first Bowser door.
          This removes access to the basement entirely.
        * The water puzzle rooms are removed, sending Mario straight to the
          Bill Blaster room.
        * Most hidden rooms around the second Bowser Door room are removed,
          sending Mario outside to the Ramparts straight away.
        * The Up/Down puzzle room and surrounding rooms are removed, sending Mario
          to the bridge before Fake Peach Hallway instead.
        This reduces the size of Bowser's Castle by about 50%.
    * Option: SkipEpilogue. If this is turned on, the game directly goes to the credit upon defeating the final boss and grabbing the star rod
    * Option: Roman Numerals. Changes the enemy HP display in battle to roman numerals.
    * Option: Mario and partners color palettes are now selectable instead of always random. NPCs and bosses can be configured to be a random pick, or always random on every loading.
    * Option: Shorten Cutscenes now skips the following scenes: Train Ride to Mt. Rugged, beanstalk growth in chapter 6, star ship ride in chapter 8.

## Rando Bugfixes
    * The ISpy badge should now be removed properly during the AlwaysISpy
      setting.
    * When starting the game with Bow, entering Boo's Mansion should no longer
      reset the chapter 3 progress to a state before reaching the top of the
      mansion.
    * Boo's Portrait is now correctly removed from the item pool and the
      portrait teleporter set to active when starting with Bow.
    * Rip Cheato's final offer and the yellow Yoshi's trade are no longer
      considered replenishing locations by the item placement logic.
    * Strong items should no longer spawn infinitely on some item locations.
    * Shy Guys should no longer hold an item above their head they won't drop
      on defeat.
    * Shy Guys should now properly drop their items if Mario has not collected
      them before.
    * Fixed Bombette not following Mario after talking to her in the jail.
    * Rowf should now allow cycling his inventory even if all three currently
      shown offers have been bought.
    * Merluvlee's hints should no longer crash when playing on console.
    * The star piece on the brick block in Koopa Village should now properly
      be the rando'd item instead of a star piece every time.
    * Beating chapter 6 should no longer softlock after getting the star power
      there.
    * Fixed Koloardo's wife buggy animation.
    * Fixed Kolorado not returning to Koopa Village after chapter 5 is completed.
    * Fixed Flower Fields background and music being sunny before the cloud machine was destroyed.
    * Fixed an issue where Storeroom Items in Toad Town would sometimes not spawn.
    * Mario's sprite should no longer have a bright pink spot in his mouth on
      the default color palette.
    * (spoilerlog) Fixed a misnamed location on the beach.
    * Fixed Random Quiz option not randomizing the questions properly.
    * Fixed some cutscenes having weird camera angles when triggering them from a different side (ch1 JrTroopa).
    * Fixed items on brick blocks in the desert, toy box and volcano that would sometimes despawn if they were consumable items.
    * The Koopa Bros tower spin attack now has it's damage scaled according to the Progressive Scaling or Random Chapter Difficulty scaling.



# ALPHA 2 (2022-01-28)

## Known Issues
    * Game may stutter for a second when loading into the mod.
    * In Boo's Mansion, entering the basement library from above without
      Bombette's overworld ability available softlocks the game.
    * On Shiver Mountain, behind the snowmen door, Mario can softlock the game by
      falling into the pit where he needs to use the SuperBoots if he does not
      have them.
    * In Mt. Lavalava Mario can softlock when beating Lava Piranha but not having
      access to Bombette. Logic does expect Bombette here to progress.
    * The logic does not account for enough StarPieces do buy out Merlow, so in
      rare circumstances progress can softlock if not enough StarPieces are
      available and a keyitem on Merlow has not been bought yet.
    * The logic does not account for shuffled chapter difficulty and may expect
      Mario to progress by visiting places where the enemies are far too strong.
    * Loading the mod on certain emulators results in a black screen on boot.
    * Under certain unknown conditions the piranha miniboss fight near Raphael's
      Tree may retrigger.
    * Under certain progress conditions, the animation of Kolorado's Wife
      bringing Mario the KoopaLegends keyitem will behave weirdly.
    * Asking for Merluvlee has a high chance of crashing the game on console;
      it seems fine on emulator though. Save your game before asking her!

## Alpha Test modifications
  The following change specific to the alpha test has been made to make progress
  quicker:
    * All shop items cost only one coin or one starpiece


## General Changes
    * Items and Item Checks
        * A new Toss overworld ability has been added to help clear out Mario's
          inventory. Hold R, then press C-Left to open the item toss menu.
        * The Toad Town dojo degrees are now shuffled, turning Chan, Lee and the
          Master into 5 new item checks. Logic expects Mario to be able to beat
          the dojo battles on 0/2/3/4/5 starspirits saved respectively.
        * As Koopa Koot usually gives three StarPieces at once for certain favors,
          a new 3xStarPiece item has been created to replace this. When randomizing
          Koopa Koot favors, these 3xStarPiece items will enter the general
          item pool.
        * The item in the palm tree on the right hand side of the Yoshi Village
          shop map is now randomized (was always a Coconut before).
        * The mysterious block in Dry Dry Desert now has to be hit 1, 5 and 10
          times for the three hidden blocks to appear
          (down from vanilla 1, 10, 100).
        * If a chosen randomizer setting makes an item entirely useless to Mario
          (like FlowerGateOpen or the new AlwaysSpeedySpin), then said item will
          be removed from the item pool. The gaps left by this removal are then
          filled with random items chosen from Tayce T.'s cooking repertoire
          (save for Mistake, Cake, KookieCookie, LemonCandy, KoopaTea, Koopasta,
          NuttyCake).
        * The item spawning system has been overhauled. Duplicate unique items
          will no longer show up as Mistakes on the overworld, instead there will
          simply be no item at all. If the item is given by a chest or NPC, the
          actual item will show, but if the item is a duplicate, a Mistake will be
          added to the inventory if not full.
        * Returning the Calculator to Rowf is now an actual item check.
        * Rowf now allows to cycle his currently available inventory by
          talking to him. This does not pick 3 random items from his inventory
          as it would in vanilla, instead it iterates through his inventory.
          His inventory order is re-shuffled every time Mario is two maps
          away from his shop (vanilla behavior).
        * Merlow now shows his wares even if Mario has no StarPieces.
        * Due to technical reasons, the yellow Yoshi in Yoshi's Village will now
          only give his item in exchange for a Tayce T. item once.
        * Due to technical reasons, Rip Cheato will now only give his last, 
          formerly infinite, item once.
    * Progression
        * Entering Toad Town Station via the train (before breaking the boulder
          that blocks the tracks) now breaks the boulder instead of letting the
          train pass through it.
        * The Yoshi Kids are now missing the moment Mario sets foot on the island,
          allowing to search for them without entering the village beforehand.
    * Title Screen
        * The title screen now shows the seed's hash in the form of four item icons
          instead of a list of byte values. The hash has been moved down, outside
          of the overscan area, to be more easily visible.
        * The save select screen now properly shows which star spirits have been
          rescued already instead of showing all of them as rescued
    * NPC Interaction
        * The interaction with the Goombario NPC in Goomba Village has been changed
          to flow a bit more naturaly.
        * Merluvlee's hints changed: Due to the huge amount of items in her hint
          pool, Merluvlee was very likely to give a hint that was useless to Mario,
          wasting time and coins. The pool of keyitems and badges she gives hints
          about has been shrunk to give a much higher chance at receiving a
          useful hint. She now only gives hints on the most important keyitems,
          and leaves out keyitems in dungeons during the
          "KeyitemsOutsideDungeon: false" setting. Additionally, when asking for
          hints about badges, she only hints towards the stronger end of the
          badge spectrum (taking the Glitzpit discord's tier lists into
          consideration). However, both her hint pools of keyitems and badges
          also include a few intentional duds.
        * Chuck Quizmo now randomizes the order of the answers he offers Mario for
          his questions. This does not change which answer is correct, but
          memorizing the location of the correct answer instead of the answer itself
          is no longer possible for Mario.

## EXPERIMENTAL
    The following changes have been made and have been put into the alpha for
    evaluation by the community. Based on community feedback these changes might
    be kept, turned into an Option, or be removed entirely. In case you're
    wondering why we didn't turn these into Options right away: Turning changes
    into Options takes additional time.
    * Running away from a battle now drops less coins. To compensate, Mario
      drops some of his star points instead.
    * Most replenishing item sources now have a limit on very strong regular
      items and Mario can only receive these items once. This effectively
      removes infinite LifeShroom bushes, infinite UltraShroom trees and
      similarly strong locations. Shops are unaffected by this change.
    * A new way of displaying custom popup messages has been implemented,
      allowing the game to display a new "inventory is full" message when
      getting items from chests or NPCs. If a chest or NPC attempts to give
      Mario a regular item while Mario's inventory is full, the item will now
      drop to the ground as if tossed by Mario instead of being lost.
      For testing purposes, this feature is only implemented sporadically.
      Some locations (but not all), where this is implemented, are:
        * All vanilla partner unlock checks
        * Rip Cheato
        * Kolorado in Yoshi Village

## Suggestions
    These changes have been made following suggestions by the community:
    * A save block has been added to the Fake Peach Hallway room in
      Bowser's Castle.
    * A recovery block (heart block) has been added to the central area in
      Flower Fields.
    * During shuffled chapter difficulty, the spoilerlog will now list the
      chapter numbers at the start of the file instead of at the end.

## New Options
    * Option: AlwaysSpeedySpin
      If this is turned on, Mario is always under the effect of the
      Speedy Spin badge. To compensate, the Speedy Spin badge is removed
      from the item pool.
    * Option: AlwaysISpy
      If this is turned on, Mario is always under the effect of the
      I Spy badge. To compensate, the I Spy badge is removed from the item pool.
    * Option: AlwaysPeekaboo
      If this is turned on, Mario is always under the effect of the Peekaboo
      badge. To compensate, the Peekaboo badge is removed from the item pool.
    * Option: HiddenBlockMode
      Choose one of four options for hidden blocks:
        0 = vanilla
        1 = show hidden blocks when Watt is the active partner (overworld
            ability not needed)
        2 = show hidden blocks when Watt's overworld ability is available
            (Watt unlocked or always active via PartnersAlwaysUsable)
        3 = always show hidden blocks (this option changes logic)
    * Option: IncludeDojo
      Includes the 5 items gained from the dojo into the item pool.
    * Option: ProgressiveScaling
      Overrides normal difficulty and shuffled chapter difficulty.
      Makes all enemies of chapters 1-7 scale with overall seed progress.
      Each item influencing progression has a value associated with it, and
      when the sum of the values of all collected items reaches certain
      threshholds, the affected enemies level up by one chapter.
    * Option: QuizmoAlwaysAppears
      Setting this to true forces Quizmo to appear in a town, but not
      necessarily in every map of that town, 100% of the time until his
      local questions have been answered.

## Performance
    * Removed pause menu code that blurs the background. This should reduce lag
      (in the case of some emulators very noticably) when opening the
      pause menu.

## Logic Changes
    * Whacka is now treated as a missable check and should no longer hold items
      that are required to beat the seed.
    * Anti Guy is no longer considered beatable upon first encountering him.
      Instead the logic now assumes Mario to bribe him with a LemonCandy, so
      his chest now logically requires access to Tayce T., the CookBook, a
      replenishing Lemon source and a replenishing CakeMix source.
    * The logic now considers the Mt. Lavalava UltraHammer room and the two
      adjacent rooms with lava rivers in them to be traversible with
      Lakilester, in addition to being traversible with Parakarry.
    * The yellow blocks that make up the block bridge in Toad Town Tunnels that
      leads to Shiver City are now considered reachable with SuperBoots instead
      of UltraBoots, as Mario can groundpound them.
    * The Yoshi kids now need to be saved for yellow Yoshi to offer his Melon
      trade for a Tayce T. item.

## Softlock prevention
    This probably should've been an entry in the first readme, but here's the
    currently implemented softlock preventions:
    * Falling into the Jail in Koopa Bros Fortress sets the wall to open
      temporarily if all of the following conditions are met:
        * PartnersAlwaysUsable is turned off, and
        * Bombette has not been unlocked yet, and
        * the Bombette partner item is not held by the Bombette NPC
    * Doing Gourmet Guy Skip in the Toybox changes the gate blocking the train
      tracks to open temporarily, allowing Mario to squeeze around Gourmet Guy
      on his way back.
    * Giving Lily the WaterStone but not having Sushie will make it so the room
      before Lily's Fountain is not filled with water (until the player
      unlocks Sushie).
    * Triggering the Shiver City Murder Mystery does not block off the pipe back
      to Toad Town.
    * Placing the StarStone into its socket on Shiver Mountain usually blocks
      off the entrance to Merlar's Sanctuary. This is changed to allow removing
      the StarStone from the socket again after reloading the map.

## Rando Bugfixes
    * The item in the yellow block in Gusty Gulch's Ghost Town's house should
      no longer get stuck in the house's roof and instead fall down to Mario.
    * The letter deliveries to Koover and Nomadimouse should now work correctly.
    * Entering Crystal Palace should no longer set the game's story progress
      byte and lock Peach's Castle from being entered by Mario.
    * Items should no longer be shown (or added to the inventory) as Mistake
      items for no apparent reason.
    * The following locations should now properly display their newly
      randomized item instead of the vanilla item:
        * Goomba Road signboard
        * Kammy cutscenes in the Toybox
        * MysteryNote ShyGuy
        * Kolorado's MagicalSeed
        * Petunia's MagicalBean, Rosie's Waterstone and Lily's MiracleWater
        * Merle's scarf
    * The following places have had their music better adjusted to the current
      chapter progress:
        * Infront of the windmill in Gusty Gulch
        * Central Flower Fields area
        * Petunia's field when doing her sidequest after breaking the
          Puff Puff Machine
        * Toad Town during the epilogue
    * Rip Cheato should no longer give only star pieces (unless the seed just
      happens to rando that way).
    * Talking to Mort T. near Toad Town Station should no longer crash the game.
    * Taking part in Chuck Quizmo's quiz should no longer freeze or crash the
      game.
    * Breaking the thunderbolt block on Pleasant Path near Koopa Bros. Fortress
      should no longer crash the game.
    * Coins should now have a proper item name and description when offered in
      an item shop.
    * The ground in Bowser's Castle's shop should now stay solid after buying
      an item there.
    * The pause menu's world map should no longer be a garbled mess.
    * Starting a game on a new savefile, Game Over'ing before saving and then
      loading the same new savefile again should no longer crash the game.
    * Opening a chest should no longer have weird timings on the ShowItem
      pop-up message and on regaining control of Mario.
    * Fixed spacing issues on the GotItem messages.
    * Entering the Right Stairway room in Koopa Bros. Fortress from one
      of the basement entrances should now always lower the stairs instantly.
    * That one bush in Koopa Village no longer allows its item to be missable.
    * Beating Lakilester in Flower Fields after defeating Huff 'n Puff should
      no longer crash the game.
    * Pausing the game shortly after standing near an item offer inside a shop
      should no longer crash the game when closing the pause menu again.
    * The FirstAttack, SpinAttack and BumpAttack badges should now work
      correctly with the ShuffleChapterDifficulty setting.
    * The camera during the Jr. Troopa battle in Pleasant Path should no longer
      behave weirdly.
    * The chapter 5 Jr. Troopa battle now correctly triggers after saving
      Sushie from the tree, instead of upon reaching the village.
    * The chapter 5 Jr. Troopa will now have 50% of max HP during
      Chapter Difficulty Shuffle, instead of always 20 HP.
    * Fuzzipede during the battle in the whale now has a tattle string, no
      longer crashing the game when Tattle'd
    * The padlock in the Stone Puzzle room in Dry Dry Ruins should longer
      stay floating in the air after being unlocked.
    * Visiting the jail in Koopa Bros Fortress after defeating the Koopa Bros
      should no longer have odd behavior, like blocking off Bombette or
      crashing the game.
    * Kooper should no longer appear in Koopa Village if he was one of Mario's
      starting partners.
    * The item icons of Luigi's Autograph and Merluvlee's Autograph should no
      longer be swapped.
    * When buying a badge from a shop that usually does not sell badges, the
      BP costs of the badge should no longer show up in the
      "You need X coins for Y" dialog.
    * Random Battle Formations: Battles in Dry Dry Ruins and the Crystal Palace
      should no longer have hovering Swoopers and Swoopulas in them.
    * Random Chapter Difficulty: Some enemies were having their HP and damage
      values increased by one on accident, this should no longer happen.
    * Spoilerlog: Fixed a typo that made Kolorado's deal for the VolcanoVase
      appear to be his deal for the Artifact.
    * Spoilerlog: Several misnamed item names fixed

## Vanilla Bugfixes
    * Hurting Whacka with Bombette's overworld ability should now deal less
      "damage" to Whacka and correctly drop his item.
    * It should no longer be possible for Mario's partners to get stuck in
      collision when attempting to board the train in Toad Town
    * Getting caught by Sentinels ("UFOs") in Tubba Blubba's Castle while
      riding Lakilester should no longer softlock the game.
    * Catching the item on the tree near the snowmen in Shiver Mountain in
      midair should no longer crash the game.
    * Tattle'ing the Goombario NPC in Goomba Village should no longer softlock
      the game due to a missing tattle string.
    * Sushie's Tidal Wave now caps at 14 successful action command inputs.
      If the cap is reached, the action command immediately closes and starts
      the move.
    * The unused HustleDrink item has been fixed to now properly clear the
      status effect if Mario is affected by one. Thusly, Mario should no longer
      be able to permanently stun himself by using a HustleDrink. This is in
      preparation to allow unused items into the item pool.
    * DoubleDipping or TripleDipping EggMissile items at Lava Piranha should
      no longer crash the game.
    * The tree that opens up the hidden Playroom in Toad Town can now properly
      be hit by Bombette's explosion (moved the bomb trigger).

## Visuals and Music
    * Color palettes for Mario and Peach are no longer random per animation per
      map load. Instead, they can now be locked to a chosen sprite palette.
    * New color palettes have been added to the following sprites:
        * Partner: Kooper
        * Boss: Tutankoopa
        * Boss: Tubba Blubba
        * Boss: Lava Piranha
        * Boss: Crystal King
        * NPC: Ninji





# ALPHA 1 (2022-01-15)

## Known Issues
  * Game may stutter for a second when loading into the mod
  * Getting caught by Sentinels in Tubba Blubba's Castle while riding Lakilester
    softlocks the game (vanilla bug)
  * The "You got" item message for star pieces does not fit inside of the
    popup message box
  * When buying a badge from a shop that usually does not sell badges, the
    BP costs of the badge show up in the "You need X coins for Y" dialog
  * Chests do not check if Mario has enough space in his regular
    item inventory to actually put the item there. In this case the item is lost
  * In Boo's Mansion, entering the basement library from above without
    Bombette's overworld ability available softlocks the game
  * On Shiver Mountain, behind the snowmen door, Mario can softlock the game by
    falling into the pit where he needs to use the UltraBoots if he does not
    have them

## Vanilla-game bugfixes
  Some changes have been made to vanilla game behavior to fix bugs left by the
  developers.
  * Major
    * Partner: Goombario
      * Goombario's Multibonk was bugged, stopping the attack very early under certain
        circumstances. This has been fixed
    * Item: Kookie Cookie
      * In battle, this item recovered 30 FP instead of the 15 FP mentioned in the
        item description. This has been fixed to always restore 15 FP
    * Item: Electro Pop
      * In battle, this item set Mario's FP to his current HP + 15, instead of
        recovering 15 FP like mentioned in the item description. This has been
        fixed to always recover 15 FP
    * Flower Fields Tulielip softlock
      * Under certain circumstances, it was possible to softlock when talking to
        Tulielip, because of missing dialogue. This has been fixed
    * Boo's Mansion Blue Warp Pipe activation  
      * Former behavior: Activating the Blue Warp Pipe to Boo's Mansion in Toad Town tunnels, but then
        walking to the mansion instead of taking the Warp Pipe there unlocks the Goomba Village Blue
        Warp Pipe instead of the Boo's Mansion Blue Warp Pipe.
      * New behavior: Walking to Boo's Mansion instead of taking the pipe there correctly activates
        its Warp Pipe.
  * Minor
    * Tubba Blubba's Heart tunnel chase
      * Former behavior: Inside Gusty Gulch's windmill Tubba Blubba's Heart can be seen fleeing from
        Mario in the Heart Chamber, the first tunnel on the way back, the spring at the bottom of the
        well and the upper room.
      * New behavior: Tubba Blubba's Heart can additionally be seen fleeing in the two remaining
        tunnel rooms. The animations for this are programmed in the vanilla game, but were called
        incorrectly.
